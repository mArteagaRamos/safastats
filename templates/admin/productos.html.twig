{% extends 'base.html.twig' %}

{% block title %}Admin{% endblock %}

{% block body %}
<div class="container mt-5">
    <h2 class="mb-4 text-center">Todos los productos</h2>

    <div class="row g-4">
        {% for productoData in productos %}
            {% set producto = productoData['producto'] %}
            {% set avgStars = productoData['avgStars']|default(0) %}

            <div class="col-6 col-md-3 col-lg-2">
                <div class="card h-100 shadow-sm card-hover">
                    <img src="{{ producto.imageLink }}"
                         class="card-img-top"
                         alt="{{ producto.name }}">

                    <div class="card-body text-center">
                        <h6 class="card-title">{{ producto.name }}</h6>

                        {# Media de estrellas #}
                        <div class="mb-2">
                            {% for i in 1..5 %}
                                {% if i <= avgStars|round(0, 'floor') %}
                                    <i class="bi bi-star-fill text-warning"></i>
                                {% else %}
                                    <i class="bi bi-star text-warning"></i>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
